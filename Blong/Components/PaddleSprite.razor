@using System.IO

@inject GameManager gameManager
<style>

    .paddle {
        width: 25px;
        height: 100px;
    }

    

 </style>

<div class="paddle @Class"
     style="top: @(Sprite.Top)px;left: @(Sprite.Left)px;" />

@code {


    [Parameter]
    public Sprite Sprite { get ; set ; }

    [Parameter]
    public String Class { get ; set ; }


    // get ot know your component lifecycle : 
    // https://docs.microsoft.com/en-us/aspnet/core/blazor/lifecycle?view=aspnetcore-3.1
    //

    protected override void OnParametersSet()
    {

        // init the timer update event
        Sprite.Update = (timeState) =>
        {
            var sprite = (Sprite) timeState;
            // convert direction and speed to delta-x

            if (sprite.Direction < 180)
            {
                sprite.Top -= sprite.Speed;
            }
            else
            {
                sprite.Top += sprite.Speed;
            }

            InvokeAsync(() => // threading dispatch wrapper
            {
                StateHasChanged();
            });
        };

    }
}
